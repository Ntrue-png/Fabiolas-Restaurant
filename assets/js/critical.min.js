class ResourceLoader{constructor(){this.resources=new Map,this.loaded=new Set}async loadResource(e,s){if(!this.loaded.has(e))try{switch(s){case"script":await this.loadScript(e);break;case"style":await this.loadStyle(e);break;case"image":await this.loadImage(e)}this.loaded.add(e)}catch(s){console.error(`Failed to load ${e}:`,s)}}loadScript(e){return new Promise(((s,a)=>{const o=document.createElement("script");o.src=e,o.async=!0,o.onload=s,o.onerror=a,document.head.appendChild(o)}))}loadStyle(e){return new Promise(((s,a)=>{const o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=s,o.onerror=a,document.head.appendChild(o)}))}loadImage(e){return new Promise(((s,a)=>{const o=new Image;o.src=e,o.onload=s,o.onerror=a}))}}const loader=new ResourceLoader;document.addEventListener("DOMContentLoaded",(async()=>{await Promise.all([loader.loadResource("assets/js/main.js","script"),loader.loadResource("assets/css/critical/main.css","style")]),requestIdleCallback((()=>{loader.loadResource("assets/css/non-critical/styles.css","style")}))}));document.addEventListener("DOMContentLoaded",(()=>{console.log("DOM loaded"),"function"==typeof initSlideshow&&initSlideshow(),"function"==typeof initAnimations&&initAnimations(),"function"==typeof initMobileMenu&&initMobileMenu();const n=document.querySelector("main");window.addEventListener("scroll",(()=>{window.scrollY>50?n.classList.add("scrolled"):n.classList.remove("scrolled")}))}));    // Gestione Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
            try {
                // Unregistra eventuali service worker esistenti
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (let registration of registrations) {
                    await registration.unregister();
                }
                
                // Registra il nuovo service worker
                const registration = await navigator.serviceWorker.register('/service-worker.js');
                console.log('ServiceWorker registrato con successo:', registration.scope);
            } catch (error) {
                console.error('Errore durante la registrazione del ServiceWorker:', error);
            }
        });
    }